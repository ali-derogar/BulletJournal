# Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ BulletJournal

Ø§ÛŒÙ† Ø±Ø§Ù‡Ù†Ù…Ø§ Ø³Ù‡ Ø±ÙˆØ´ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ ØªÙˆØ¶ÛŒØ­ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

## ğŸ¯ Ø±ÙˆØ´ Û±: Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø¯Ø³ØªÛŒ (Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ†)

### Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø³Ø±ÙˆØ±

ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ø¯Ø± Ø³Ø±ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:

```bash
# Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ
curl -fsSL https://raw.githubusercontent.com/ali-derogar/BulletJournal/master/server-setup.sh -o server-setup.sh
chmod +x server-setup.sh
sudo ./server-setup.sh
```

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø±Ø§ Ù†ØµØ¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
- âœ… Git
- âœ… Docker & Docker Compose
- âœ… Node.js & npm
- âœ… tmux
- âœ… Ú©Ù„ÙˆÙ† Ù¾Ø±ÙˆÚ˜Ù‡
- âœ… Ø³Ø±ÙˆÛŒØ³ systemd

### Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø¨Ø¹Ø¯ÛŒ (Ù‡Ø± Ø¨Ø§Ø± Ú©Ù‡ ØªØºÛŒÛŒØ± Ø¯Ø§Ø¯ÛŒØ¯)

Ø¨Ø¹Ø¯ Ø§Ø² Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ØŒ ÙÙ‚Ø· Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:

```bash
sudo /opt/bulletjournal/deploy.sh
```

ÛŒØ§ Ø§Ú¯Ø± Ø¯Ø± Ù¾ÙˆØ´Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ Ù‡Ø³ØªÛŒØ¯:

```bash
sudo ./deploy.sh
```

**Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø®ÙˆØ¯Ú©Ø§Ø±:**
- âœ… Ø¢Ø®Ø±ÛŒÙ† ØªØºÛŒÛŒØ±Ø§Øª Ø±Ø§ Ø§Ø² GitHub Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯
- âœ… Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§ Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… Ø§ÛŒÙ…ÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯
- âœ… Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§ Ø±Ø§ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
- âœ… ÙˆØ¶Ø¹ÛŒØª Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

---

## ğŸš€ Ø±ÙˆØ´ Û²: GitHub Actions (Ú©Ø§Ù…Ù„Ø§Ù‹ Ø®ÙˆØ¯Ú©Ø§Ø±)

### ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡

1. **Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø³Ø±ÙˆØ±** (Ù…Ø«Ù„ Ø±ÙˆØ´ Û±):
```bash
curl -fsSL https://raw.githubusercontent.com/ali-derogar/BulletJournal/master/server-setup.sh -o server-setup.sh
chmod +x server-setup.sh
sudo ./server-setup.sh
```

2. **ØªÙ†Ø¸ÛŒÙ… SSH Keys Ø¯Ø± GitHub:**

   Ø§Ù„Ù) Ú©Ù„ÛŒØ¯ SSH Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯ (Ø¯Ø± Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ù…Ø­Ù„ÛŒ):
   ```bash
   ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/github_actions
   ```

   Ø¨) Ú©Ù„ÛŒØ¯ Ø¹Ù…ÙˆÙ…ÛŒ Ø±Ø§ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:
   ```bash
   ssh-copy-id -i ~/.ssh/github_actions.pub your-user@your-server
   ```

   Ø¬) Ú©Ù„ÛŒØ¯ Ø®ØµÙˆØµÛŒ Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯:
   ```bash
   cat ~/.ssh/github_actions
   ```

3. **Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Secrets Ø¨Ù‡ GitHub:**

   Ø¨Ù‡ Ù…Ø³ÛŒØ± Ø²ÛŒØ± Ø¨Ø±ÙˆÛŒØ¯:
   ```
   GitHub Repository â†’ Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret
   ```

   Ø§ÛŒÙ† Secrets Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:
   - `SERVER_HOST`: Ø¢Ø¯Ø±Ø³ IP Ø³Ø±ÙˆØ± (Ù…Ø«Ù„Ø§Ù‹: `45.89.244.24`)
   - `SERVER_USER`: Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ SSH (Ù…Ø«Ù„Ø§Ù‹: `root` ÛŒØ§ `ubuntu`)
   - `SSH_PRIVATE_KEY`: Ú©Ù„ÛŒØ¯ Ø®ØµÙˆØµÛŒ Ú©Ù‡ Ú©Ù¾ÛŒ Ú©Ø±Ø¯ÛŒØ¯
   - `SERVER_PORT`: Ù¾ÙˆØ±Øª SSH (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹: `22`)

### Ø§Ø³ØªÙØ§Ø¯Ù‡

Ø­Ø§Ù„Ø§ Ù‡Ø± Ø¨Ø§Ø± Ú©Ù‡ Ø¨Ù‡ Ø¨Ø±Ù†Ú† `master` Ù¾ÙˆØ´ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ **Ø®ÙˆØ¯Ú©Ø§Ø±** Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯! ğŸ‰

```bash
git add .
git commit -m "fix: some bug"
git push
# â† GitHub Actions Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
```

Ø¨Ø±Ø§ÛŒ Ø¯ÛŒÙ¾Ù„ÙˆÛŒ Ø¯Ø³ØªÛŒ:
- Ø¨Ù‡ GitHub Ø¨Ø±ÙˆÛŒØ¯ â†’ Actions â†’ Deploy to Server â†’ Run workflow

---

## ğŸ”„ Ø±ÙˆØ´ Û³: Systemd Service (Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª)

Ø§Ú¯Ø± Ø§Ø² `server-setup.sh` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ÛŒØ¯ØŒ ÛŒÚ© Ø³Ø±ÙˆÛŒØ³ systemd Ù†ØµØ¨ Ø´Ø¯Ù‡ Ú©Ù‡:
- âœ… Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª Ø³Ø±ÙˆØ±ØŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âœ… Docker Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯

### Ø¯Ø³ØªÙˆØ±Ø§Øª Ø³Ø±ÙˆÛŒØ³:

```bash
# Ø´Ø±ÙˆØ¹
sudo systemctl start bulletjournal

# ØªÙˆÙ‚Ù
sudo systemctl stop bulletjournal

# Ø±ÛŒØ³ØªØ§Ø±Øª
sudo systemctl restart bulletjournal

# ÙˆØ¶Ø¹ÛŒØª
sudo systemctl status bulletjournal

# ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² Ø¨ÙˆØª
sudo systemctl enable bulletjournal

# ØºÛŒØ±ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ
sudo systemctl disable bulletjournal
```

---

## ğŸ“ Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…ÙÛŒØ¯

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§
```bash
cd /opt/bulletjournal
sudo docker compose logs -f
```

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§
```bash
cd /opt/bulletjournal
sudo docker compose ps
```

### Ø¯ÛŒØ¨Ø§Ú¯
```bash
# Ù„Ø§Ú¯ ÙÙ‚Ø· frontend
sudo docker compose logs -f frontend

# Ù„Ø§Ú¯ ÙÙ‚Ø· backend
sudo docker compose logs -f backend

# ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø±
sudo docker exec -it bulletjournal-frontend sh
sudo docker exec -it bulletjournal-backend sh
```

### ØªÙ…ÛŒØ² Ú©Ø±Ø¯Ù† (Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ú†ÛŒØ²)
```bash
cd /opt/bulletjournal
sudo docker compose down -v  # Ø­Ø°Ù volumes Ù‡Ù…
sudo docker system prune -a  # Ø­Ø°Ù ØªÙ…Ø§Ù… Ø§ÛŒÙ…ÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡
```

---

## ğŸ”§ ØªØºÛŒÛŒØ± ØªÙ†Ø¸ÛŒÙ…Ø§Øª

### ÙˆÛŒØ±Ø§ÛŒØ´ environment variables
```bash
sudo nano /opt/bulletjournal/.env.local
sudo /opt/bulletjournal/deploy.sh
```

### ØªØºÛŒÛŒØ± Ø¢Ø¯Ø±Ø³ repository
```bash
sudo nano /opt/bulletjournal/deploy.sh
# Ø®Ø· REPO_URL Ø±Ø§ ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù†ÛŒØ¯
```

---

## âš¡ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„

### Ú†Ø·ÙˆØ± ÙÙ‚Ø· frontend Ø±Ø§ rebuild Ú©Ù†Ù…ØŸ
```bash
cd /opt/bulletjournal
sudo docker compose up -d --build frontend
```

### Ú†Ø·ÙˆØ± ÙÙ‚Ø· backend Ø±Ø§ rebuild Ú©Ù†Ù…ØŸ
```bash
cd /opt/bulletjournal
sudo docker compose up -d --build backend
```

### Ú†Ø·ÙˆØ± Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§ Ø±Ø§ Ø¨Ø¯ÙˆÙ† rebuild Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†Ù…ØŸ
```bash
cd /opt/bulletjournal
sudo docker compose restart
```

### Ú†Ø·ÙˆØ± Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ù…ØŸ
```bash
sudo docker exec -it bulletjournal-backend sh
cd data
sqlite3 bullet_journal.db
```

---

## ğŸ¯ Ø®Ù„Ø§ØµÙ‡: Ú©Ø¯Ø§Ù… Ø±ÙˆØ´ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù…ØŸ

| Ø±ÙˆØ´ | Ø²Ù…Ø§Ù† Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ | Ø³Ø§Ø¯Ú¯ÛŒ | Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨ÙˆØ¯Ù† | ØªÙˆØµÛŒÙ‡ Ø¨Ø±Ø§ÛŒ |
|-----|-----------------|--------|-------------|-----------|
| Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¯Ø³ØªÛŒ | Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ | â­â­â­â­â­ | Ø¯Ø³ØªÛŒ | Ø´Ø±ÙˆØ¹ Ø³Ø±ÛŒØ¹ØŒ ØªÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© |
| GitHub Actions | Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ | â­â­â­ | â­â­â­â­â­ | Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ØªÛŒÙ…ÛŒØŒ CI/CD |
| Systemd | Ø®ÙˆØ¯Ú©Ø§Ø± | â­â­â­â­ | â­â­â­ | Ø§Ø¬Ø±Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª |

**ØªÙˆØµÛŒÙ‡:** Ø§Ø² Ù‡Ø± Ø³Ù‡ Ø±ÙˆØ´ Ø¨Ø§ Ù‡Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯! ğŸš€
